##Задача 1

Напишите список операций, которые вы будете производить для остановки запроса пользователя (нужно прервать CRUD операцию в MongoDB)

Ответ:
```text
Раздел Terminate Running Operations по предложенной ссылке говорит о том, что можно установить лимит времени для операций, а если надо прервать операцию, то поможет команда `db.killOp`.
Текущие операции покажет метод db.currentOp()
```

Предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB.

Ответ:
```text
Можно применить метод maxTimeMS() для установки лимита по времени. Тогда операция будет прервана в следующей точки прерывания (interrupt point).
Кроме того нужно отловить долгие запросы с помощью db.currentOp(), потом проверить план пойманного долгого запроса с помощью explain('executionStats'). И перестроить индексы.
```

## Задача 2

Ответ:
```text
Если стало увеличиваться отношение количества записанных key-value значений к количеству истекших значений, 
то вероятно Redis не успевает удалять истекшие значения. В результате роста истекших значений, которые необходимо удалить,
Redis может уйти в блокировку и зациклиться на их удалении пока в выборке не будет менее 25% истекших записей.
```

## Задача 3

Ответ:
```text
Может быть не сколько причин.
Превышено время обработки запроса, упал по timeout
Проблема  с сетью, рвётся соединение.
```
Решение 
```
1. Увеличить на сервере MySQL wait_timeout, max_allowed_packet, net_write_timeout и net_read_timeout
2. Уменьшить pool_recycle, wait_timeout. 
```

## Задача 4

Ответ:
```text
1) Увеличить оперативную память
2) Поставить лимит на использование памяти для Postgres
Поставить лимиты можно так:
В файле postgresql.conf надо определить значения:
shared_buffers = примерно 1/16 от объема данных (такую рекомендацию нашел)
work_mem = (объем доступной памяти - shared_buffers) / число активных пользователей
maintenance_work_mem  = 2/3 от размера самой большой таблицы
```
